<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeguroTech - Cotiza tu Seguro Personalizado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --secondary-color: #10b981;
            --accent-color: #f59e0b;
            --dark-bg: #111827;
            --light-bg: #f9fafb;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --error-color: #ef4444;
            --success-color: #10b981;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: var(--light-bg);
            overflow-x: hidden;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-decoration: none;
            cursor: pointer;
        }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            top: 60px;
            left: 0;
            right: 0;
            background: white;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 999;
        }

        .progress-bar {
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #e5e7eb;
            transform: translateY(-50%);
            z-index: -1;
        }

        .progress-step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 2px solid #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s;
            cursor: pointer;
        }

        .progress-step.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
            transform: scale(1.1);
        }

        .progress-step.completed {
            background: var(--success-color);
            border-color: var(--success-color);
            color: white;
        }

        /* Main Content */
        .main-container {
            max-width: 1200px;
            margin: 140px auto 2rem;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
            min-height: calc(100vh - 160px);
        }

        /* Form Sections */
        .form-section {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .form-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-header {
            margin-bottom: 2rem;
        }

        .section-header h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
        }

        .section-header p {
            color: var(--text-light);
        }

        /* Insurance Type Selection */
        .insurance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .insurance-option {
            padding: 1.5rem;
            border: 2px solid #e5e7eb;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .insurance-option:hover {
            border-color: var(--primary-color);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.1);
        }

        .insurance-option.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.05), rgba(16, 185, 129, 0.05));
        }

        .insurance-option .icon {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .insurance-option h3 {
            font-size: 1rem;
            color: var(--text-dark);
        }

        /* Form Inputs */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        /* Slider Inputs */
        .slider-container {
            margin-bottom: 2rem;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .slider-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .custom-slider {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
            position: relative;
            cursor: pointer;
        }

        .custom-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(37, 99, 235, 0.3);
            transition: transform 0.2s;
        }

        .custom-slider::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .custom-slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(37, 99, 235, 0.3);
            transition: transform 0.2s;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-light);
        }

        /* Coverage Visualization */
        .coverage-chart {
            background: var(--light-bg);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .coverage-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .coverage-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .coverage-item .label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .coverage-item .value {
            font-weight: bold;
            color: var(--primary-color);
        }

        /* Summary Sidebar */
        .summary-sidebar {
            position: sticky;
            top: 140px;
            height: fit-content;
        }

        .summary-card {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .summary-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--light-bg);
        }

        .summary-header h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .price-display {
            font-size: 3rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .price-period {
            font-size: 1rem;
            color: var(--text-light);
        }

        .summary-details {
            margin-bottom: 2rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.75rem;
            font-size: 0.875rem;
        }

        .detail-item .label {
            color: var(--text-light);
        }

        .detail-item .value {
            font-weight: 600;
            color: var(--text-dark);
        }

        /* Buttons */
        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(37, 99, 235, 0.3);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }

        .btn-success {
            background: var(--success-color);
            color: white;
            width: 100%;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }

        /* Features List */
        .features-list {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-light);
        }

        .feature-item .check {
            color: var(--success-color);
            font-weight: bold;
        }

        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 2rem;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #e5e7eb;
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Success Message */
        .success-message {
            display: none;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(37, 99, 235, 0.1));
            border: 2px solid var(--success-color);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        .success-message.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .success-message h3 {
            color: var(--success-color);
            margin-bottom: 0.5rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .main-container {
                grid-template-columns: 1fr;
                margin-top: 120px;
            }

            .summary-sidebar {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                top: auto;
                z-index: 998;
            }

            .summary-card {
                border-radius: 20px 20px 0 0;
                box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.1);
            }

            .price-display {
                font-size: 2rem;
            }

            .insurance-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .progress-container {
                padding: 0.5rem;
            }

            .progress-step {
                width: 30px;
                height: 30px;
                font-size: 0.875rem;
            }
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark-bg);
            color: white;
            text-align: center;
            border-radius: 10px;
            padding: 0.5rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.875rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Animations */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="segurotech-home-linked.html" class="logo">SeguroTech</a>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="color: var(--text-light);">¿Necesitas ayuda?</span>
                <button class="btn btn-secondary" style="padding: 0.5rem 1rem;">Chat en vivo</button>
            </div>
        </div>
    </nav>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-step active" data-step="1">1</div>
            <div class="progress-step" data-step="2">2</div>
            <div class="progress-step" data-step="3">3</div>
            <div class="progress-step" data-step="4">4</div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-container">
        <!-- Form Section -->
        <div class="form-content">
            <!-- Step 1: Insurance Type -->
            <div class="form-section active" id="step1">
                <div class="section-header">
                    <h2>¿Qué quieres proteger?</h2>
                    <p>Selecciona el tipo de seguro que necesitas</p>
                </div>
                
                <div class="insurance-grid">
                    <div class="insurance-option" data-type="agricola">
                        <div class="icon">🌾</div>
                        <h3>Agrícola</h3>
                    </div>
                    <div class="insurance-option" data-type="vehiculo">
                        <div class="icon">🚗</div>
                        <h3>Vehículo</h3>
                    </div>
                    <div class="insurance-option" data-type="vida">
                        <div class="icon">❤️</div>
                        <h3>Vida</h3>
                    </div>
                    <div class="insurance-option" data-type="salud">
                        <div class="icon">🏥</div>
                        <h3>Salud</h3>
                    </div>
                    <div class="insurance-option" data-type="dispositivo">
                        <div class="icon">📱</div>
                        <h3>Dispositivo</h3>
                    </div>
                    <div class="insurance-option" data-type="p2p">
                        <div class="icon">👥</div>
                        <h3>P2P Comunitario</h3>
                    </div>
                    <div class="insurance-option" data-type="remesas">
                        <div class="icon">💸</div>
                        <h3>Remesas</h3>
                    </div>
                    <div class="insurance-option" data-type="emprendedor">
                        <div class="icon">💼</div>
                        <h3>Emprendedor</h3>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="nextStep()" disabled id="step1-next">Continuar</button>
                </div>
            </div>

            <!-- Step 2: Basic Information -->
            <div class="form-section" id="step2">
                <div class="section-header">
                    <h2>Cuéntanos sobre ti</h2>
                    <p>Necesitamos algunos datos básicos</p>
                </div>

                <form id="basic-info-form">
                    <div class="form-group">
                        <label for="name">Nombre completo</label>
                        <input type="text" id="name" required>
                    </div>

                    <div class="form-group">
                        <label for="email">Correo electrónico</label>
                        <input type="email" id="email" required>
                    </div>

                    <div class="form-group">
                        <label for="phone">WhatsApp</label>
                        <input type="tel" id="phone" placeholder="+54 11 1234-5678" required>
                    </div>

                    <div class="form-group">
                        <label for="location">Provincia/Estado</label>
                        <select id="location" required>
                            <option value="">Selecciona tu ubicación</option>
                            <optgroup label="Argentina">
                                <option value="buenos-aires">Buenos Aires</option>
                                <option value="caba">Ciudad Autónoma de Buenos Aires</option>
                                <option value="catamarca">Catamarca</option>
                                <option value="chaco">Chaco</option>
                                <option value="chubut">Chubut</option>
                                <option value="cordoba">Córdoba</option>
                                <option value="corrientes">Corrientes</option>
                                <option value="entre-rios">Entre Ríos</option>
                                <option value="formosa">Formosa</option>
                                <option value="jujuy">Jujuy</option>
                                <option value="la-pampa">La Pampa</option>
                                <option value="la-rioja">La Rioja</option>
                                <option value="mendoza">Mendoza</option>
                                <option value="misiones">Misiones</option>
                                <option value="neuquen">Neuquén</option>
                                <option value="rio-negro">Río Negro</option>
                                <option value="salta">Salta</option>
                                <option value="san-juan">San Juan</option>
                                <option value="san-luis">San Luis</option>
                                <option value="santa-cruz">Santa Cruz</option>
                                <option value="santa-fe">Santa Fe</option>
                                <option value="santiago-del-estero">Santiago del Estero</option>
                                <option value="tierra-del-fuego">Tierra del Fuego</option>
                                <option value="tucuman">Tucumán</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-secondary" onclick="previousStep()">Atrás</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep()">Continuar</button>
                    </div>
                </form>
            </div>

            <!-- Step 3: Coverage Customization -->
            <div class="form-section" id="step3">
                <div class="section-header">
                    <h2>Personaliza tu cobertura</h2>
                    <p>Ajusta los parámetros según tus necesidades</p>
                </div>

                <!-- Agricultural Insurance Sliders -->
                <div id="agricola-params" class="insurance-params" style="display: none;">
                    <div class="slider-container">
                        <div class="slider-header">
                            <label>Umbral de lluvia (mm)</label>
                            <span class="slider-value" id="rainfall-value">50mm</span>
                        </div>
                        <input type="range" class="custom-slider" id="rainfall-slider" min="10" max="100" value="50" step="5">
                        <div class="slider-labels">
                            <span>Menor protección</span>
                            <span>Mayor protección</span>
                        </div>
                    </div>

                    <div class="slider-container">
                        <div class="slider-header">
                            <label>Cobertura por hectárea</label>
                            <span class="slider-value" id="coverage-value">$5,000</span>
                        </div>
                        <input type="range" class="custom-slider" id="coverage-slider" min="1000" max="20000" value="5000" step="1000">
                        <div class="slider-labels">
                            <span>$1,000</span>
                            <span>$20,000</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Número de hectáreas</label>
                        <input type="number" id="hectares" min="1" value="10" required>
                    </div>
                </div>

                <!-- Vehicle Insurance Sliders -->
                <div id="vehiculo-params" class="insurance-params" style="display: none;">
                    <div class="slider-container">
                        <div class="slider-header">
                            <label>Kilómetros promedio por mes</label>
                            <span class="slider-value" id="km-value">1,000 km</span>
                        </div>
                        <input type="range" class="custom-slider" id="km-slider" min="100" max="5000" value="1000" step="100">
                        <div class="slider-labels">
                            <span>100 km</span>
                            <span>5,000 km</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Tipo de uso</label>
                        <select id="vehicle-use">
                            <option value="personal">Personal</option>
                            <option value="uber">Uber/Didi/Cabify</option>
                            <option value="delivery">Delivery</option>
                            <option value="comercial">Comercial</option>
                        </select>
                    </div>
                </div>

                <!-- Life Insurance Sliders -->
                <div id="vida-params" class="insurance-params" style="display: none;">
                    <div class="form-group">
                        <label>Tipo de seguro de vida</label>
                        <select id="life-type" onchange="updateLifeInsurance()">
                            <option value="term">Seguro de vida temporal</option>
                            <option value="whole">Seguro de vida permanente</option>
                        </select>
                    </div>

                    <div class="slider-container">
                        <div class="slider-header">
                            <label>Suma asegurada</label>
                            <span class="slider-value" id="life-coverage-value">$50,000</span>
                        </div>
                        <input type="range" class="custom-slider" id="life-coverage-slider" min="10000" max="500000" value="50000" step="10000">
                        <div class="slider-labels">
                            <span>$10,000</span>
                            <span>$500,000</span>
                        </div>
                    </div>

                    <div class="slider-container" id="term-length-container" style="display: block;">
                        <div class="slider-header">
                            <label>Duración del seguro (años)</label>
                            <span class="slider-value" id="term-length-value">20 años</span>
                        </div>
                        <input type="range" class="custom-slider" id="term-length-slider" min="5" max="30" value="20" step="5">
                        <div class="slider-labels">
                            <span>5 años</span>
                            <span>30 años</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Edad</label>
                        <input type="number" id="life-age" min="18" max="70" value="35" required onchange="calculatePrice()">
                    </div>

                    <div class="form-group">
                        <label>Historial médico</label>
                        <select id="life-health-history" onchange="calculatePrice()">
                            <option value="excellent">Excelente - Sin condiciones</option>
                            <option value="good">Bueno - Condiciones menores controladas</option>
                            <option value="fair">Regular - Diabetes/Hipertensión controlada</option>
                            <option value="poor">Con condiciones - Enfermedad cardíaca/Cáncer en remisión</option>
                        </select>
                    </div>
                </div>

                <!-- Health Insurance -->
                <div id="salud-params" class="insurance-params" style="display: none;">
                    <div class="form-group">
                        <label>Tipo de cobertura</label>
                        <select id="health-coverage-type" onchange="calculatePrice()">
                            <option value="basic">Básica - Consultas y emergencias</option>
                            <option value="standard">Estándar - Incluye especialistas</option>
                            <option value="premium">Premium - Cobertura completa</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Edad</label>
                        <input type="number" id="health-age" min="0" max="100" value="35" required onchange="calculatePrice()">
                    </div>

                    <div class="form-group">
                        <label>Número de beneficiarios</label>
                        <input type="number" id="health-beneficiaries" min="1" max="10" value="1" required onchange="calculatePrice()">
                    </div>

                    <div class="form-group">
                        <label>Condiciones preexistentes</label>
                        <select id="health-conditions" onchange="calculatePrice()">
                            <option value="none">Ninguna</option>
                            <option value="minor">Alergias/Asma leve</option>
                            <option value="moderate">Diabetes/Hipertensión</option>
                            <option value="severe">Condiciones crónicas múltiples</option>
                        </select>
                    </div>
                </div>

                <!-- Device Insurance -->
                <div id="dispositivo-params" class="insurance-params" style="display: none;">
                    <div class="form-group">
                        <label>Tipo de dispositivo</label>
                        <select id="device-type" onchange="updateDeviceBrands()">
                            <option value="">Selecciona un tipo</option>
                            <option value="smartphone">Smartphone</option>
                            <option value="laptop">Laptop</option>
                            <option value="tablet">Tablet</option>
                            <option value="smartwatch">Smartwatch</option>
                            <option value="camera">Cámara</option>
                        </select>
                    </div>

                    <div class="form-group" id="device-brand-container" style="display: none;">
                        <label>Marca</label>
                        <select id="device-brand" onchange="calculateDeviceValue()">
                            <option value="">Selecciona una marca</option>
                        </select>
                    </div>

                    <div class="form-group" id="device-model-container" style="display: none;">
                        <label>Modelo</label>
                        <select id="device-model" onchange="calculateDeviceValue()">
                            <option value="">Selecciona un modelo</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tipo de cobertura</label>
                        <select id="device-coverage" onchange="calculatePrice()">
                            <option value="basic">Básica - Robo y daño accidental</option>
                            <option value="premium">Premium - Todo riesgo</option>
                        </select>
                    </div>

                    <div class="coverage-chart" id="device-value-display" style="display: none; margin-top: 1rem;">
                        <div class="coverage-item">
                            <div class="label">Valor del dispositivo</div>
                            <div class="value" id="device-calculated-value">$0</div>
                        </div>
                    </div>
                </div>

                <!-- P2P Community Insurance -->
                <div id="p2p-params" class="insurance-params" style="display: none;">
                    <div class="form-group">
                        <label>Tipo de grupo</label>
                        <select id="p2p-group-type" onchange="calculatePrice()">
                            <option value="friends">Amigos/Familia (5-10 personas)</option>
                            <option value="neighbors">Vecinos (10-20 personas)</option>
                            <option value="coworkers">Compañeros de trabajo (20-50 personas)</option>
                            <option value="community">Comunidad grande (50+ personas)</option>
                        </select>
                    </div>

                    <div class="slider-container">
                        <div class="slider-header">
                            <label>Fondo común mensual por persona</label>
                            <span class="slider-value" id="p2p-contribution-value">$10</span>
                        </div>
                        <input type="range" class="custom-slider" id="p2p-contribution-slider" min="5" max="50" value="10" step="5">
                        <div class="slider-labels">
                            <span>$5</span>
                            <span>$50</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Cobertura máxima por evento</label>
                        <select id="p2p-max-coverage" onchange="calculatePrice()">
                            <option value="500">Hasta $500 - Emergencias menores</option>
                            <option value="1000">Hasta $1,000 - Gastos médicos básicos</option>
                            <option value="2500">Hasta $2,500 - Reparaciones del hogar</option>
                            <option value="5000">Hasta $5,000 - Eventos mayores</option>
                        </select>
                    </div>

                    <div class="coverage-chart" style="margin-top: 1rem;">
                        <h4>Beneficios del grupo:</h4>
                        <div class="coverage-item">
                            <div class="label">✓ Devolución del 40% si no hay reclamos</div>
                        </div>
                        <div class="coverage-item">
                            <div class="label">✓ Votación grupal para aprobar reclamos</div>
                        </div>
                        <div class="coverage-item">
                            <div class="label">✓ Transparencia total con blockchain</div>
                        </div>
                    </div>
                </div>

                <!-- Remittance Insurance -->
                <div id="remesas-params" class="insurance-params" style="display: none;">
                    <div class="slider-container">
                        <div class="slider-header">
                            <label>Monto promedio de remesa mensual</label>
                            <span class="slider-value" id="remittance-amount-value">$300</span>
                        </div>
                        <input type="range" class="custom-slider" id="remittance-amount-slider" min="50" max="2000" value="300" step="50">
                        <div class="slider-labels">
                            <span>$50</span>
                            <span>$2,000</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>País de destino de las remesas</label>
                        <select id="remittance-destination" onchange="calculatePrice()">
                            <option value="mexico">México</option>
                            <option value="guatemala">Guatemala</option>
                            <option value="elsalvador">El Salvador</option>
                            <option value="honduras">Honduras</option>
                            <option value="colombia">Colombia</option>
                            <option value="peru">Perú</option>
                            <option value="ecuador">Ecuador</option>
                            <option value="bolivia">Bolivia</option>
                            <option value="paraguay">Paraguay</option>
                        </select>
                    </div>

                    <div class="slider-container">
                        <div class="slider-header">
                            <label>Meses de cobertura garantizada</label>
                            <span class="slider-value" id="remittance-months-value">6 meses</span>
                        </div>
                        <input type="range" class="custom-slider" id="remittance-months-slider" min="3" max="24" value="6" step="3">
                        <div class="slider-labels">
                            <span>3 meses</span>
                            <span>24 meses</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Número de beneficiarios</label>
                        <input type="number" id="remittance-beneficiaries" min="1" max="10" value="1" required onchange="calculatePrice()">
                    </div>

                    <div class="coverage-chart" style="margin-top: 1rem;">
                        <h4>¿Qué cubre?</h4>
                        <div class="coverage-item">
                            <div class="label">✓ Enfermedad o accidente del remitente</div>
                        </div>
                        <div class="coverage-item">
                            <div class="label">✓ Pérdida de empleo involuntaria</div>
                        </div>
                        <div class="coverage-item">
                            <div class="label">✓ Fallecimiento (beneficio extendido)</div>
                        </div>
                    </div>
                </div>

                <!-- Entrepreneur Insurance -->
                <div id="emprendedor-params" class="insurance-params" style="display: none;">
                    <div class="form-group">
                        <label>Tipo de negocio</label>
                        <select id="business-type" onchange="calculatePrice()">
                            <option value="street-vendor">Vendedor ambulante</option>
                            <option value="small-shop">Tienda pequeña</option>
                            <option value="food-service">Comida/Restaurant</option>
                            <option value="professional">Servicios profesionales</option>
                            <option value="online">Negocio digital/E-commerce</option>
                            <option value="crafts">Artesanías/Manufactura</option>
                        </select>
                    </div>

                    <div class="slider-container">
                        <div class="slider-header">
                            <label>Ingresos mensuales promedio</label>
                            <span class="slider-value" id="business-revenue-value">$1,000</span>
                        </div>
                        <input type="range" class="custom-slider" id="business-revenue-slider" min="200" max="10000" value="1000" step="200">
                        <div class="slider-labels">
                            <span>$200</span>
                            <span>$10,000</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Número de empleados</label>
                        <select id="business-employees" onchange="calculatePrice()">
                            <option value="0">Solo yo</option>
                            <option value="1-3">1-3 empleados</option>
                            <option value="4-10">4-10 empleados</option>
                            <option value="11+">Más de 10 empleados</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Cobertura deseada</label>
                        <select id="business-coverage-type" onchange="calculatePrice()">
                            <option value="basic">Básica - Responsabilidad civil</option>
                            <option value="standard">Estándar - RC + Robo</option>
                            <option value="complete">Completa - RC + Robo + Pérdida de ingresos</option>
                            <option value="premium">Premium - Todo riesgo + Equipos</option>
                        </select>
                    </div>

                    <div class="coverage-chart" style="margin-top: 1rem;">
                        <h4>Protección incluida:</h4>
                        <div class="coverage-item">
                            <div class="label">✓ Daños a terceros</div>
                        </div>
                        <div class="coverage-item">
                            <div class="label">✓ Protección de inventario</div>
                        </div>
                        <div class="coverage-item">
                            <div class="label">✓ Interrupción del negocio</div>
                        </div>
                    </div>
                </div>

                <!-- Coverage Visualization -->
                <div class="coverage-chart">
                    <h4 style="margin-bottom: 1rem;">Tu cobertura incluye:</h4>
                    <div class="coverage-item">
                        <div class="label">
                            <span>✓</span>
                            <span>Pago automático en 7 días</span>
                        </div>
                        <div class="value">Incluido</div>
                    </div>
                    <div class="coverage-item">
                        <div class="label">
                            <span>✓</span>
                            <span>Sin deducible</span>
                        </div>
                        <div class="value">Incluido</div>
                    </div>
                    <div class="coverage-item">
                        <div class="label">
                            <span>✓</span>
                            <span>Gestión 100% digital</span>
                        </div>
                        <div class="value">Incluido</div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="previousStep()">Atrás</button>
                    <button class="btn btn-primary" onclick="nextStep()">Continuar</button>
                </div>
            </div>

            <!-- Step 4: Review & Confirm -->
            <div class="form-section" id="step4">
                <div class="section-header">
                    <h2>Revisa y confirma</h2>
                    <p>Verifica que toda la información sea correcta</p>
                </div>

                <div class="success-message" id="success-message">
                    <h3>¡Felicidades! Tu cotización está lista</h3>
                    <p>Un asesor se contactará contigo en los próximos minutos</p>
                </div>

                <div class="coverage-chart">
                    <h4 style="margin-bottom: 1rem;">Resumen de tu seguro</h4>
                    <div id="final-summary">
                        <!-- Summary will be populated by JavaScript -->
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="terms" required>
                        Acepto los términos y condiciones y la política de privacidad
                    </label>
                </div>

                <div class="button-group">
                    <button class="btn btn-secondary" onclick="previousStep()">Atrás</button>
                    <button class="btn btn-success pulse" onclick="submitQuote()">Contratar Ahora</button>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p style="margin-top: 1rem;">Procesando tu solicitud...</p>
                </div>
            </div>
        </div>

        <!-- Summary Sidebar -->
        <div class="summary-sidebar">
            <div class="summary-card">
                <div class="summary-header">
                    <h3>Tu cotización</h3>
                    <div class="price-display" id="price-display">$0</div>
                    <div class="price-period">por mes</div>
                </div>

                <div class="summary-details" id="summary-details">
                    <div class="detail-item">
                        <span class="label">Tipo de seguro:</span>
                        <span class="value" id="summary-type">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Cobertura:</span>
                        <span class="value" id="summary-coverage">-</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Inicio de vigencia:</span>
                        <span class="value">Inmediato</span>
                    </div>
                </div>

                <div class="features-list">
                    <div class="feature-item">
                        <span class="check">✓</span>
                        <span>Sin letra chica</span>
                    </div>
                    <div class="feature-item">
                        <span class="check">✓</span>
                        <span>Cancela cuando quieras</span>
                    </div>
                    <div class="feature-item">
                        <span class="check">✓</span>
                        <span>Atención 24/7 por WhatsApp</span>
                    </div>
                    <div class="feature-item">
                        <span class="check">✓</span>
                        <span>Pagos con cualquier medio</span>
                    </div>
                </div>

                <div style="margin-top: 1.5rem; text-align: center;">
                    <small style="color: var(--text-light);">
                        <span class="tooltip">
                            🔒 Tus datos están seguros
                            <span class="tooltiptext">Utilizamos encriptación de grado bancario para proteger tu información</span>
                        </span>
                    </small>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentStep = 1;
        let selectedInsurance = null;
        let deviceValue = 0; // Store calculated device value
        let quoteData = {
            type: '',
            name: '',
            email: '',
            phone: '',
            location: '',
            parameters: {},
            price: 0
        };

        // Insurance type selection
        document.querySelectorAll('.insurance-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.insurance-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedInsurance = this.dataset.type;
                quoteData.type = selectedInsurance;
                document.getElementById('step1-next').disabled = false;
                updateSummary();
            });
        });

        // Slider event listeners - Setup after DOM loads
        function setupSliders() {
            const sliders = {
                'rainfall-slider': {
                    valueId: 'rainfall-value',
                    format: (val) => `${val}mm`,
                    priceImpact: 2
                },
                'coverage-slider': {
                    valueId: 'coverage-value',
                    format: (val) => `$${parseInt(val).toLocaleString()}`,
                    priceImpact: 0.001
                },
                'km-slider': {
                    valueId: 'km-value',
                    format: (val) => `${parseInt(val).toLocaleString()} km`,
                    priceImpact: 0.05
                },
                'life-coverage-slider': {
                    valueId: 'life-coverage-value',
                    format: (val) => `$${parseInt(val).toLocaleString()}`,
                    priceImpact: 0.0002
                },
                'term-length-slider': {
                    valueId: 'term-length-value',
                    format: (val) => `${val} años`
                },
                'p2p-contribution-slider': {
                    valueId: 'p2p-contribution-value',
                    format: (val) => `$${val}`
                },
                'remittance-amount-slider': {
                    valueId: 'remittance-amount-value',
                    format: (val) => `$${parseInt(val).toLocaleString()}`
                },
                'remittance-months-slider': {
                    valueId: 'remittance-months-value',
                    format: (val) => `${val} meses`
                },
                'business-revenue-slider': {
                    valueId: 'business-revenue-value',
                    format: (val) => `$${parseInt(val).toLocaleString()}`
                }
            };

            Object.keys(sliders).forEach(sliderId => {
                const slider = document.getElementById(sliderId);
                if (slider) {
                    slider.addEventListener('input', function() {
                        const config = sliders[sliderId];
                        const valueElement = document.getElementById(config.valueId);
                        if (valueElement) {
                            valueElement.textContent = config.format(this.value);
                        }
                        calculatePrice();
                    });
                }
            });
        }

        // Calculate price based on parameters
        function calculatePrice() {
            let basePrice = 0;
            
            switch(selectedInsurance) {
                case 'agricola':
                    const rainfallSlider = document.getElementById('rainfall-slider');
                    const coverageSlider = document.getElementById('coverage-slider');
                    const hectaresInput = document.getElementById('hectares');
                    
                    if (rainfallSlider && coverageSlider && hectaresInput) {
                        const rainfall = parseInt(rainfallSlider.value);
                        const coverage = parseInt(coverageSlider.value);
                        const hectares = parseInt(hectaresInput.value || 10);
                        
                        // Price formula: base rate * risk factor * coverage * hectares
                        const riskFactor = (100 - rainfall) / 100; // Higher risk with lower rainfall threshold
                        const baseRate = 0.002; // 0.2% of coverage
                        basePrice = coverage * hectares * baseRate * (1 + riskFactor);
                    } else {
                        basePrice = 150;
                    }
                    break;
                    
                case 'vehiculo':
                    const kmSlider = document.getElementById('km-slider');
                    const vehicleUse = document.getElementById('vehicle-use');
                    
                    if (kmSlider && vehicleUse) {
                        const km = parseInt(kmSlider.value);
                        const use = vehicleUse.value || 'personal';
                        
                        // Base rate per 1000km
                        const ratePerThousandKm = 25;
                        basePrice = (km / 1000) * ratePerThousandKm;
                        
                        // Usage multipliers
                        const usageMultipliers = {
                            'personal': 1,
                            'uber': 1.8,
                            'delivery': 2.2,
                            'comercial': 1.5
                        };
                        basePrice *= usageMultipliers[use] || 1;
                    } else {
                        basePrice = 75;
                    }
                    break;
                    
                case 'vida':
                    const lifeCoverageSlider = document.getElementById('life-coverage-slider');
                    const lifeType = document.getElementById('life-type');
                    const lifeAge = document.getElementById('life-age');
                    const healthHistory = document.getElementById('life-health-history');
                    const termLength = document.getElementById('term-length-slider');
                    
                    if (lifeCoverageSlider && lifeType && lifeAge && healthHistory) {
                        const coverage = parseInt(lifeCoverageSlider.value);
                        const age = parseInt(lifeAge.value || 35);
                        const type = lifeType.value;
                        const health = healthHistory.value || 'excellent';
                        
                        // Base rate per $1000 of coverage
                        let ratePerThousand = type === 'term' ? 0.5 : 2.5;
                        
                        // Age multiplier (increases exponentially)
                        const ageMultiplier = Math.pow(1.08, Math.max(0, age - 25));
                        
                        // Health multipliers
                        const healthMultipliers = {
                            'excellent': 1,
                            'good': 1.25,
                            'fair': 1.75,
                            'poor': 2.5
                        };
                        
                        // Term length adjustment for term life
                        let termMultiplier = 1;
                        if (type === 'term' && termLength) {
                            const years = parseInt(termLength.value);
                            termMultiplier = 0.8 + (years / 100); // Longer terms cost more
                        }
                        
                        basePrice = (coverage / 1000) * ratePerThousand * ageMultiplier * 
                                   healthMultipliers[health] * termMultiplier;
                    } else {
                        basePrice = 25;
                    }
                    break;
                    
                case 'salud':
                    const healthType = document.getElementById('health-coverage-type');
                    const healthAge = document.getElementById('health-age');
                    const beneficiaries = document.getElementById('health-beneficiaries');
                    const conditions = document.getElementById('health-conditions');
                    
                    if (healthType && healthAge && beneficiaries && conditions) {
                        const age = parseInt(healthAge.value || 35);
                        const numBeneficiaries = parseInt(beneficiaries.value || 1);
                        const coverageType = healthType.value;
                        const healthConditions = conditions.value || 'none';
                        
                        // Base prices by coverage type
                        const basePrices = {
                            'basic': 30,
                            'standard': 60,
                            'premium': 120
                        };
                        
                        basePrice = basePrices[coverageType] || 60;
                        
                        // Age adjustment
                        if (age < 18) basePrice *= 0.7;
                        else if (age > 50) basePrice *= 1 + ((age - 50) * 0.03);
                        
                        // Beneficiaries (discount per additional person)
                        basePrice *= (1 + (numBeneficiaries - 1) * 0.6);
                        
                        // Conditions multiplier
                        const conditionMultipliers = {
                            'none': 1,
                            'minor': 1.15,
                            'moderate': 1.4,
                            'severe': 2
                        };
                        basePrice *= conditionMultipliers[healthConditions];
                    } else {
                        basePrice = 45;
                    }
                    break;
                    
                case 'dispositivo':
                    const deviceCoverage = document.getElementById('device-coverage');
                    const deviceType = document.getElementById('device-type');
                    
                    if (deviceValue > 0 && deviceType && deviceType.value && deviceCoverage) {
                        const coverage = deviceCoverage.value || 'basic';
                        const type = deviceType.value;
                        
                        // Base rate as percentage of device value
                        let baseRate = coverage === 'basic' ? 0.08 : 0.12; // 8% or 12% annually
                        
                        // Device type risk multipliers
                        const typeMultipliers = {
                            'smartphone': 1.2,
                            'laptop': 1,
                            'tablet': 1.1,
                            'smartwatch': 1.3,
                            'camera': 0.9
                        };
                        
                        basePrice = (deviceValue * baseRate * (typeMultipliers[type] || 1)) / 12; // Monthly price
                    } else {
                        basePrice = 15;
                    }
                    break;
                    
                case 'p2p':
                    const groupType = document.getElementById('p2p-group-type');
                    const contribution = document.getElementById('p2p-contribution-slider');
                    const maxCoverage = document.getElementById('p2p-max-coverage');
                    
                    if (groupType && contribution && maxCoverage) {
                        const monthlyContribution = parseInt(contribution.value);
                        const groupSize = {
                            'friends': 7,
                            'neighbors': 15,
                            'coworkers': 35,
                            'community': 75
                        };
                        
                        // Platform fee: 15% of contributions
                        basePrice = monthlyContribution * 0.15;
                        
                        // Add catastrophic coverage based on max coverage
                        const catastrophicRate = parseInt(maxCoverage.value) * 0.001;
                        basePrice += catastrophicRate;
                    } else {
                        basePrice = 8;
                    }
                    break;
                    
                case 'remesas':
                    const remittanceAmount = document.getElementById('remittance-amount-slider');
                    const destination = document.getElementById('remittance-destination');
                    const months = document.getElementById('remittance-months-slider');
                    const remBeneficiaries = document.getElementById('remittance-beneficiaries');
                    
                    if (remittanceAmount && destination && months && remBeneficiaries) {
                        const monthlyAmount = parseInt(remittanceAmount.value);
                        const coverageMonths = parseInt(months.value);
                        const numBeneficiaries = parseInt(remBeneficiaries.value || 1);
                        
                        // Base rate: 2.5% of monthly remittance amount
                        basePrice = monthlyAmount * 0.025;
                        
                        // Longer coverage periods get slight discount
                        const monthsDiscount = 1 - (coverageMonths / 100);
                        basePrice *= monthsDiscount;
                        
                        // Multiple beneficiaries increase cost
                        basePrice *= (1 + (numBeneficiaries - 1) * 0.3);
                        
                        // Minimum price
                        basePrice = Math.max(basePrice, 5);
                    } else {
                        basePrice = 15;
                    }
                    break;
                    
                case 'emprendedor':
                    const businessType = document.getElementById('business-type');
                    const revenue = document.getElementById('business-revenue-slider');
                    const employees = document.getElementById('business-employees');
                    const bizCoverage = document.getElementById('business-coverage-type');
                    
                    if (businessType && revenue && employees && bizCoverage) {
                        const monthlyRevenue = parseInt(revenue.value);
                        const bizType = businessType.value;
                        const coverage = bizCoverage.value;
                        
                        // Base rate as percentage of revenue
                        const baseRates = {
                            'basic': 0.015,
                            'standard': 0.025,
                            'complete': 0.035,
                            'premium': 0.045
                        };
                        
                        basePrice = monthlyRevenue * (baseRates[coverage] || 0.025);
                        
                        // Business type risk multipliers
                        const typeMultipliers = {
                            'street-vendor': 1.3,
                            'small-shop': 1,
                            'food-service': 1.4,
                            'professional': 0.8,
                            'online': 0.7,
                            'crafts': 1.1
                        };
                        
                        basePrice *= typeMultipliers[bizType] || 1;
                        
                        // Employee adjustment
                        const empMultipliers = {
                            '0': 1,
                            '1-3': 1.2,
                            '4-10': 1.5,
                            '11+': 2
                        };
                        
                        basePrice *= empMultipliers[employees.value] || 1;
                        
                        // Minimum price
                        basePrice = Math.max(basePrice, 20);
                    } else {
                        basePrice = 35;
                    }
                    break;
                    
                default:
                    basePrice = 50;
            }
            
            quoteData.price = Math.round(basePrice);
            updatePriceDisplay();
            updateSummaryCoverage();
        }

        // Update price display
        function updatePriceDisplay() {
            document.getElementById('price-display').textContent = `$${quoteData.price.toLocaleString()}`;
        }

        // Update summary
        function updateSummary() {
            const typeMap = {
                'agricola': 'Seguro Agrícola',
                'vehiculo': 'Seguro Vehicular',
                'vida': 'Seguro de Vida',
                'salud': 'Seguro de Salud',
                'dispositivo': 'Seguro de Dispositivo',
                'p2p': 'Seguro P2P Comunitario',
                'remesas': 'Seguro de Remesas',
                'emprendedor': 'Seguro para Emprendedores'
            